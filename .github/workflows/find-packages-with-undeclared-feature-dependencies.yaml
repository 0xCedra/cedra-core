name: "Find Packages with undeclared feature dependencies"
on:
  workflow_dispatch:
  schedule:
    # every day at 3am PST
    - cron: "0 10 * * *"

jobs:
  find-packages-with-undeclared-feature-dependencies:
    runs-on: high-perf-docker
    steps:
      - uses: aptos-labs/actions/rust-setup@v0.1
        with:
          CHECKOUT_REPOSITORY: ${{ github.repository }}
          CHECKOUT_GIT_REF: ${{ github.head_ref || github.ref_name }} # the branch name
          GIT_CREDENTIALS: ${{ secrets.GIT_CREDENTIALS }}
      - run: scripts/find-packages-with-undeclared-feature-dependencies.sh
