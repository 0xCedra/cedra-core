---
id: "AptosClient"
title: "Class: AptosClient"
sidebar_label: "AptosClient"
sidebar_position: 0
custom_edit_url: null
---

Provides methods for retrieving data from Aptos node.
For more detailed API specification see [https://fullnode.devnet.aptoslabs.com/spec.html#/](https://fullnode.devnet.aptoslabs.com/spec.html#/)

## Hierarchy

- **`AptosClient`**

  ↳ [`FaucetClient`](FaucetClient.md)

## Constructors

### constructor

• **new AptosClient**(`nodeUrl`, `config?`)

Establishes a connection to Aptos node

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeUrl` | `string` | A url of the Aptos Node API endpoint |
| `config?` | [`AptosClientConfig`](../modules.md#aptosclientconfig) | An optional config for inner axios instance. Detailed `config` description: [https://github.com/axios/axios#request-config](https://github.com/axios/axios#request-config) |

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:68](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L68)

## Properties

### accounts

• **accounts**: `Accounts`<`unknown`\>

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:54](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L54)

___

### client

• **client**: `HttpClient`<`unknown`\>

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:51](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L51)

___

### events

• **events**: `Events`<`unknown`\>

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:58](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L58)

___

### nodeUrl

• **nodeUrl**: `string`

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:49](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L49)

___

### tables

• **tables**: `Tables`<`unknown`\>

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:56](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L56)

___

### transactions

• **transactions**: `Transactions`<`unknown`\>

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:60](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L60)

## Methods

### createSigningMessage

▸ **createSigningMessage**(`txnRequest`): `Promise`<`string`\>

Converts a transaction request by `generate_transaction` into it's binary hex BCS representation, ready for
signing and submitting.
Generally you may want to use `signTransaction`, as it takes care of this step + signing

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `txnRequest` | [`UserTransactionRequest`](../interfaces/Types.UserTransactionRequest.md) | A raw transaction generated by `generateTransaction` method |

#### Returns

`Promise`<`string`\>

A hex-encoded string prefixed with `0x` and fulfilled with two hex digits per byte

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:264](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L264)

___

### generateTransaction

▸ **generateTransaction**(`sender`, `payload`, `options?`): `Promise`<[`UserTransactionRequest`](../interfaces/Types.UserTransactionRequest.md)\>

Generates a transaction request that can be submitted to produce a raw transaction that
can be signed, which upon being signed can be submitted to the blockchain

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `sender` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account address of transaction sender |
| `payload` | [`TransactionPayload`](../namespaces/Types.md#transactionpayload) | Transaction payload. It depends on transaction type you want to send |
| `options?` | `Partial`<[`UserTransactionRequest`](../interfaces/Types.UserTransactionRequest.md)\> | Options allow to overwrite default transaction options. Defaults are: ```bash   {     sender: senderAddress.hex(),     sequence_number: account.sequence_number,     max_gas_amount: "1000",     gas_unit_price: "1",     gas_currency_code: "XUS",     // Unix timestamp, in seconds + 10 seconds     expiration_timestamp_secs: (Math.floor(Date.now() / 1000) + 10).toString(),   } ``` |

#### Returns

`Promise`<[`UserTransactionRequest`](../interfaces/Types.UserTransactionRequest.md)\>

A transaction object

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:237](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L237)

___

### getAccount

▸ **getAccount**(`accountAddress`): `Promise`<[`Account`](../interfaces/Types.Account.md)\>

Queries an Aptos account by address

**`example`** An example of the returned account
```
{
   sequence_number: "1",
   authentication_key: "0x5307b5f4bc67829097a8ba9b43dba3b88261eeccd1f709d9bde240fc100fbb69"
}
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `accountAddress` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account address |

#### Returns

`Promise`<[`Account`](../interfaces/Types.Account.md)\>

Core account resource, used for identifying account and transaction execution

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:98](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L98)

___

### getAccountModule

▸ **getAccountModule**(`accountAddress`, `moduleName`, `query?`): `Promise`<[`MoveModule`](../interfaces/Types.MoveModule.md)\>

Queries module associated with given account by module name

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `accountAddress` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account address |
| `moduleName` | `string` | The name of the module |
| `query?` | `Object` | - |
| `query.version?` | `string` | Specifies ledger version of transactions. By default latest version will be used |

#### Returns

`Promise`<[`MoveModule`](../interfaces/Types.MoveModule.md)\>

Specified module.
Module is represented by MoveModule interface. It contains module `bytecode` and `abi`,
which JSON representation of a module

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:147](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L147)

___

### getAccountModules

▸ **getAccountModules**(`accountAddress`, `query?`): `Promise`<[`MoveModule`](../interfaces/Types.MoveModule.md)[]\>

Queries modules associated with given account

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `accountAddress` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account address |
| `query?` | `Object` | - |
| `query.version?` | `string` | Specifies ledger version of transactions. By default latest version will be used |

#### Returns

`Promise`<[`MoveModule`](../interfaces/Types.MoveModule.md)[]\>

Account modules array for a specific ledger version.
Module is represented by MoveModule interface. It contains module `bytecode` and `abi`,
which is JSON representation of a module

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:129](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L129)

___

### getAccountResource

▸ **getAccountResource**(`accountAddress`, `resourceType`, `query?`): `Promise`<[`AccountResource`](../interfaces/Types.AccountResource.md)\>

Queries resource associated with given account by resource type

**`example`** An example of an account resource
```
{
   type: "0x1::AptosAccount::Coin",
   data: { value: 6 }
}
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `accountAddress` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account address |
| `resourceType` | `string` | String representation of an on-chain Move struct type |
| `query?` | `Object` | - |
| `query.version?` | `string` | Specifies ledger version of transactions. By default latest version will be used |

#### Returns

`Promise`<[`AccountResource`](../interfaces/Types.AccountResource.md)\>

Account resource of specified type and ledger version

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:193](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L193)

___

### getAccountResources

▸ **getAccountResources**(`accountAddress`, `query?`): `Promise`<[`AccountResource`](../interfaces/Types.AccountResource.md)[]\>

Queries all resources associated with given account

**`example`** An example of an account resource
```
{
   type: "0x1::AptosAccount::Coin",
   data: { value: 6 }
}
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `accountAddress` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account address |
| `query?` | `Object` | - |
| `query.version?` | `string` | Specifies ledger version of transactions. By default latest version will be used |

#### Returns

`Promise`<[`AccountResource`](../interfaces/Types.AccountResource.md)[]\>

Account resources for a specific ledger version

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:170](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L170)

___

### getAccountTransactions

▸ **getAccountTransactions**(`accountAddress`, `query?`): `Promise`<[`OnChainTransaction`](../namespaces/Types.md#onchaintransaction)[]\>

Queries transactions sent by given account

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `accountAddress` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account address |
| `query?` | `Object` | Optional pagination object |
| `query.limit?` | `number` | The max number of transactions should be returned for the page. Default is 25. |
| `query.start?` | `number` | The start transaction version of the page. Default is the latest ledger version |

#### Returns

`Promise`<[`OnChainTransaction`](../namespaces/Types.md#onchaintransaction)[]\>

An array of on-chain transactions, sent by account

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:112](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L112)

___

### getChainId

▸ **getChainId**(`params?`): `Promise`<`number`\>

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `params` | `RequestParams` | Request params |

#### Returns

`Promise`<`number`\>

Current chain id

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:472](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L472)

___

### getEventsByEventHandle

▸ **getEventsByEventHandle**(`address`, `eventHandleStruct`, `fieldName`, `query?`): `Promise`<[`Event`](../interfaces/Types.Event.md)[]\>

Extracts event key from the account resource identified by the
`event_handle_struct` and `field_name`, then returns events identified by the event key

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `address` | [`MaybeHexString`](../modules.md#maybehexstring) | Hex-encoded 16 bytes Aptos account from which events are queried |
| `eventHandleStruct` | `string` | String representation of an on-chain Move struct type. (e.g. `0x1::Coin::CoinStore<0x1::TestCoin::TestCoin>`) |
| `fieldName` | `string` | The field name of the EventHandle in the struct |
| `query?` | `Object` | Optional query object |
| `query.limit?` | `number` | The number of events to be returned for the page default is 5 |
| `query.start?` | `number` | The start sequence number in the EVENT STREAM, defaulting to the latest event. The events are returned in the reverse order of sequence number |

#### Returns

`Promise`<[`Event`](../interfaces/Types.Event.md)[]\>

Array of events

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:319](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L319)

___

### getEventsByEventKey

▸ **getEventsByEventKey**(`eventKey`): `Promise`<[`Event`](../interfaces/Types.Event.md)[]\>

Queries events by event key

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `eventKey` | `string` | Event key for an event stream. It is BCS serialized bytes of `guid` field in the Move struct `EventHandle` |

#### Returns

`Promise`<[`Event`](../interfaces/Types.Event.md)[]\>

Array of events assotiated with given key

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:300](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L300)

___

### getLedgerInfo

▸ **getLedgerInfo**(`params?`): `Promise`<[`LedgerInfo`](../interfaces/Types.LedgerInfo.md)\>

Queries the latest ledger information

**`example`** Example of returned data
```
{
  chain_id: 15,
  epoch: 6,
  ledger_version: "2235883",
  ledger_timestamp:"1654580922321826"
}
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `params` | `RequestParams` | Request params |

#### Returns

`Promise`<[`LedgerInfo`](../interfaces/Types.LedgerInfo.md)\>

Latest ledger information

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:458](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L458)

___

### getTableItem

▸ **getTableItem**(`handle`, `data`, `params?`): `Promise`<`any`\>

Gets a table item for a table identified by the handle and the key for the item.
Key and value types need to be passed in to help with key serialization and value deserialization.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `handle` | `string` | A pointer to where that table is stored |
| `data` | [`TableItemRequest`](../interfaces/Types.TableItemRequest.md) | Object, that describes table item |
| `params?` | `RequestParams` | Request params |

#### Returns

`Promise`<`any`\>

Table item value rendered in JSON

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:488](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L488)

___

### getTransaction

▸ **getTransaction**(`txnHashOrVersion`): `Promise`<[`Transaction`](../namespaces/Types.md#transaction)\>

Queries transaction by hash or version. When given transaction hash, server first looks up
on-chain transaction by hash; if no on-chain transaction found, then look up transaction
by hash in the mempool (pending) transactions.
When given a transaction version, server looks up the transaction on-chain by version

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `txnHashOrVersion` | `string` | Transaction hash should be hex-encoded bytes string with 0x prefix. Transaction version is an uint64 number. |

#### Returns

`Promise`<[`Transaction`](../namespaces/Types.md#transaction)\>

Transaction from mempool or on-chain transaction

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:390](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L390)

___

### getTransactions

▸ **getTransactions**(`query?`): `Promise`<[`OnChainTransaction`](../namespaces/Types.md#onchaintransaction)[]\>

Queries on-chain transactions

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `query?` | `Object` | Optional pagination object |
| `query.limit?` | `number` | The max number of transactions should be returned for the page. Default is 25 |
| `query.start?` | `number` | The start transaction version of the page. Default is the latest ledger version |

#### Returns

`Promise`<[`OnChainTransaction`](../namespaces/Types.md#onchaintransaction)[]\>

Array of on-chain transactions

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:375](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L375)

___

### signTransaction

▸ **signTransaction**(`accountFrom`, `txnRequest`): `Promise`<[`SubmitTransactionRequest`](../namespaces/Types.md#submittransactionrequest)\>

Converts a transaction request produced by `generate_transaction` into a properly signed
transaction, which can then be submitted to the blockchain

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `accountFrom` | [`AptosAccount`](AptosAccount.md) | AptosAccount of transaction sender |
| `txnRequest` | [`UserTransactionRequest`](../interfaces/Types.UserTransactionRequest.md) | A raw transaction generated by `generateTransaction` method |

#### Returns

`Promise`<[`SubmitTransactionRequest`](../namespaces/Types.md#submittransactionrequest)\>

A transaction, signed with sender account

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:278](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L278)

___

### submitSignedBCSTransaction

▸ **submitSignedBCSTransaction**(`signedTxn`): `Promise`<[`PendingTransaction`](../namespaces/Types.md#pendingtransaction)\>

Submits a signed transaction to the the endpoint that takes BCS payload

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `signedTxn` | `Uint8Array` | A BCS transaction representation |

#### Returns

`Promise`<[`PendingTransaction`](../namespaces/Types.md#pendingtransaction)\>

Transaction that is accepted and submitted to mempool

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:351](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L351)

___

### submitTransaction

▸ **submitTransaction**(`signedTxnRequest`): `Promise`<[`PendingTransaction`](../namespaces/Types.md#pendingtransaction)\>

Submits a signed transaction to the transaction endpoint that takes JSON payload

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `signedTxnRequest` | [`SubmitTransactionRequest`](../namespaces/Types.md#submittransactionrequest) | A transaction, signed by `signTransaction` method |

#### Returns

`Promise`<[`PendingTransaction`](../namespaces/Types.md#pendingtransaction)\>

Transaction that is accepted and submitted to mempool

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:340](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L340)

___

### transactionPending

▸ **transactionPending**(`txnHash`): `Promise`<`boolean`\>

Defines if specified transaction is currently in pending state

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `txnHash` | `string` | A hash of transaction  To create a transaction hash:  1. Create hash message bytes: "Aptos::Transaction" bytes + BCS bytes of Transaction. 2. Apply hash algorithm SHA3-256 to the hash message bytes. 3. Hex-encode the hash bytes with 0x prefix. |

#### Returns

`Promise`<`boolean`\>

`true` if transaction is in pending state and `false` otherwise

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:408](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L408)

___

### waitForTransaction

▸ **waitForTransaction**(`txnHash`): `Promise`<`void`\>

Waits up to 10 seconds for a transaction to move past pending state

**`example`**
```
const signedTxn = await this.aptosClient.signTransaction(account, txnRequest);
const res = await this.aptosClient.submitTransaction(signedTxn);
await this.aptosClient.waitForTransaction(res.hash);
// do smth after transaction is accepted into blockchain
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `txnHash` | `string` | A hash of transaction |

#### Returns

`Promise`<`void`\>

A Promise, that will resolve if transaction is accepted to the blockchain,
and reject if more then 10 seconds passed

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:431](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L431)

___

### generateBCSTransaction

▸ `Static` **generateBCSTransaction**(`accountFrom`, `rawTxn`): `Uint8Array`

Generates a signed transaction that can be submitted to the chain for execution.

#### Parameters

| Name | Type |
| :------ | :------ |
| `accountFrom` | [`AptosAccount`](AptosAccount.md) |
| `rawTxn` | [`RawTransaction`](TxnBuilderTypes.RawTransaction.md) |

#### Returns

`Uint8Array`

#### Defined in

[ecosystem/typescript/sdk/src/aptos_client.ts:208](https://github.com/aptos-labs/aptos-core/blob/fb73eb358/ecosystem/typescript/sdk/src/aptos_client.ts#L208)
